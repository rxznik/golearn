# –ú–∞—Å—Å–∏–≤—ã –∏ —Å—Ä–µ–∑—ã –≤ Go ([...]T & []T)

<details>
<summary><b>üè† –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è</b></summary>

**–ú–∞—Å—Å–∏–≤** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–∏ÃÜ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø–æ–¥—Ä—è–¥.

*–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ int-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ Go —Ä–∞–∑–º–µ—Ä–æ–º 5:*
```go
var data [5]int // [0, 0, 0, 0, 0]
```

**–°—Ä–µ–∑ (slice)** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ Go, –∏–º–µ—é—â–∞—è 3 –ø–æ–ª—è:

* **–°—Å—ã–ª–∫–∞ –Ω–∞ –º–∞—Å—Å–∏–≤** - *array, —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å—Ä–µ–∑–∞.
* **–î–ª–∏–Ω–∞** - len, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å—Ä–µ–∑–µ.
* **–Å–º–∫–æ—Å—Ç—å** - cap, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å—Ä–µ–∑–µ.

*–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –Ω—É–ª–µ–≤–æ–≥–æ —Å—Ä–µ–∑–∞ int-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ Go —Ä–∞–∑–º–µ—Ä–æ–º 5 –∏ —ë–º–∫–æ—Å—Ç—å—é 10:*

```go
data := make([]int, 5, 10) // [0, 0, 0, 0, 0]
```

</details>


<details>
<summary><b>üí´ –ê–ª–ª–æ–∫–∞—Ü–∏—è –º–∞—Å–∏–≤–æ–≤ –∏ —Å—Ä–µ–∑–æ–≤</b></summary>

**–ê–ª–ª–æ–∫–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–∞ –≤ –∫—É—á—É** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Å—Å–∏–≤–∞ —Ä–∞–∑–º–µ—Ä–æ–º –±–æ–ª–µ–µ 128 –ö–ë, –∞ —Ç–∞–∫–∂–µ –ø—Ä–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ Go –∞–ª–ª–æ—Ü–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫—É—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Å—Å–∏–≤–∞ –≤–Ω–µ —Å—Ç–µ–∫–∞, –ø—Ä–∏ —Å–∏—Ç—É–∞—Ü–∏—è—Ö –∫–æ–≥–¥–∞ —Ñ-—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –º–∞—Å—Å–∏–≤).

*–ü—Ä–∏–º–µ—Ä –∞–ª–ª–æ–∫–∞—Ü–∏–∏ –º–∞—Å—Å–∏–≤–∞ –≤ –∫—É—á—É –∏ –Ω–∞ —Å—Ç–µ–∫:*

```go
package main

// go build -gcflags='-m' main.go | grep escape; rm main.exe || main

func allocation() *[3]int8 {
	var data [3]int8
	return &data // moved to heap
}

func main() {
	var arrayWithStack [128 << 10]int8 // 128 KB
	_ = arrayWithStack

	var arrayWithHeap [12 << 20]int8 // 12 MB // moved to heap
	_ = arrayWithHeap

	arrayWithHeap2 := allocation() // in heap
	_ = arrayWithHeap2
}
```

**–ê–ª–ª–æ–∫–∞—Ü–∏—è —Å—Ä–µ–∑–∞ –≤ –∫—É—á—É** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Ä–µ–∑–∞ —Å —Ä–∞–∑–º–µ—Ä–æ–º –±–æ–ª–µ–µ 64 –ö–ë (–Ω–æ –µ—Å–ª–∏ –º—ã —Å–æ–∑–¥–∞—ë–º —Å—Ä–µ–∑ –æ—Ç –º–∞—Å—Å–∏–≤–∞ –Ω–µ –±–æ–ª–µ–µ 128 –ö–ë, —Ç–æ –æ–Ω –Ω–µ –±—É–¥–µ—Ç –∞–ª–ª–æ—Ü–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∫—É—á—É), –ø—Ä–∏ —Ä–µ–∞–ª–æ–∫–∞—Ü–∏–∏ –º–∞—Å—Å–∏–≤–∞ –≤ —Å–ª–∞–π—Å–µ (—Ç.–µ. –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —ë–º–∫–æ—Å—Ç–∏), –∞ —Ç–∞–∫–∂–µ –ø—Ä–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ Go –∞–ª–ª–æ—Ü–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫—É—á—É.

*–ü—Ä–∏–º–µ—Ä –∞–ª–ª–æ–∫–∞—Ü–∏–∏ —Å—Ä–µ–∑–∞ –≤ –∫—É—á—É –∏ –Ω–∞ —Å—Ç–µ–∫:*

```go
package main

// go build -gcflags='-m' main.go | grep escape; rm main.exe || main

func allocation() *[]int8 {
	data := make([]int8, 1<<10)
	return &data
}

func main() {
	sliceWithStack := make([]int8, 0, 64<<10) // 64 KB
	_ = sliceWithStack

	var arrayWithStack [128 << 10]int8
	sliceWithStack2 := arrayWithStack[:] // 128 KB
	_ = sliceWithStack2

	sliceWithHeap := make([]int8, (64<<10)+1) // 64 KB + 1 byte // moved to heap
	_ = sliceWithHeap

	sliceInHeap := allocation() // in heap
	_ = sliceInHeap
}
```

*–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–ª–æ–∫–∞—Ü–∏–∏ –º–∞—Å—Å–∏–≤–∞ –≤ —Å—Ä–µ–∑–µ:*

```go
package main

import (
	"fmt"
	"unsafe"
)

func main() {
	slice := make([]int8, 0, 3)
	fmt.Printf("slice: %v\nslice address: %p\n", slice, unsafe.SliceData(slice))

	slice = append(slice, 1, 2, 3)
	fmt.Println("slice full capacity:", slice, "len:", len(slice), "cap:", cap(slice))
	fmt.Println("slice address:", unsafe.SliceData(slice)) // –∞–¥—Ä–µ—Å—Å –æ—Å—Ç–∞–ª—Å—è –Ω–µ–∏–∑–º–µ–Ω–µ–Ω

	/// –ø—Ä–µ–≤–æ—Å—Ö–æ–∂–¥–µ–Ω–∏–µ capacity
	slice = append(slice, 4)
	/// –∞–¥—Ä–µ—Å—Å –º–∞—Å—Å–∏–≤–∞ —Å–∏–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏–ª—Å—è, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –∞–ª–ª–æ–∫–∞—Ü–∏—è –≤ –∫—É—á—É
	fmt.Printf("slice: %v\nslice address: %p\n", slice, unsafe.SliceData(slice))
	fmt.Printf("len: %d, cap: %d\n", len(slice), cap(slice))
}
```
</details>